<!DOCTYPE html>
<html>
    <head>
        <title>Руководство пользователя SDK RC-47 1.0 : Назначение и состав SDK RC-47</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Руководство пользователя SDK RC-47 1.0</a></span>
                            </li>
                                                    <li>
                                <span><a href="17564074.html">Общие сведения</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Руководство пользователя SDK RC-47 1.0 : Назначение и состав SDK RC-47
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> Yuri Rumyantsev</span>, last modified by <span class='editor'> Sergey Torchigin</span> on Apr 27, 2015
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>SDK RC-47 предназначено для разработки прикладных программ работы с ПЛИС Virtex-7. В составе описываемого вычислительного узла есть два типа вычислительных ресурсов - CPU и ПЛИС. Поэтому прикладная программа распадается на две части - программа для CPU (будем называть хост-программа) и аппаратная схема ПЛИС (будем называть проект ПЛИС), причем разработчику необходимо предусматривать их взаимодействие в виде обмена данными. В соответствии с этим SDK RC-47 имеет две части:</p><ul><li>Программное обеспечение для создания хост-программ. Включает в себя драйвер PCI Express устройств и документированные системные библиотеки для написания пользовательских программ. В дальнейшем будем называть эту часть &quot;ПО хост-компьютера&quot;.</li><li>Программное обеспечение для создания аппаратной схемы ПЛИС. Состоит из так называемого Board Support Package или шаблона проекта ПЛИС, включающего уже готовые аппаратные интерфейсы (PCI Express, DDR) и модуля подключения пользовательского вычислительного ядра с документированным интерфейсом. В дальнейшем будем называть эту часть Board Support Package. </li></ul><p>Также SDK RC-47 предназначено для управления и контроля аппаратными ресурсами платы RC-47. К этому относятся реконфигурация ПЛИС, перепрограммирование ПЗУ для хранения стартовых конфигураций ПЛИС, температурный мониторинг платы и тд. Для решения этой задачи ПО хост-компьютера включает в себя функции обмена данными с ВПО платы RC-47. Пользователь вправе использовать эти функции в своих хост-программах, либо может запускать уже готовые пользовательские программы-обертки этих функций, называемые утилиты и входящие в состав SDK.</p><p>Наконец, SDK RC-47 включает в себя ряд примеров прикладных программ, призванных протестировать работу оборудования и раскрыть его возможности. Эти примеры должны служить начальной точкой при создании собственных пользовательских прикладных программ. </p><p>Рассмотрим все эти компоненты подробнее.</p><p> </p><h1 id="id-НазначениеисоставSDKRC-47-Программныйстек">Программный стек </h1><p>Прикладная программа SDK RC-47 предполагает взаимодействие хост-программы и проекта ПЛИС через следующий программный стек.</p><div class='scroll-title-macro'><div class='scroll-title-body'><p style="text-align: center;">

<map id="gliffy-map-17564109-9405" name="gliffy-map-17564109-9405"></map>
<table width="100%" class="gliffy-macro-table">
    <tr>
        <td >
            <table class="gliffy-macro-inner-table">
                <caption align="bottom">
                                    </caption>
                <tr>
                    <td>
                        <img style="border: none; width: 748px;" usemap="#gliffy-map-17564109-9405" src="attachments/17564075/17564110.png" alt="" class="gliffy-macro-image"/>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>


</p></div><div class='scroll-title'><strong>Программный стек SDK RC-47</strong></div></div><p> </p><p style="text-align: center;"> </p><p style="text-align: center;"> </p><p><span>Хост-программа при обращении к ПЛИС использует вызовы двух библиотек API RC-47 и API PCI Express. Библиотека платы RC-47 содержит функции, специфичные для платы RC-47. Библиотека API PCI Express используется для обеспечения работы по шине PCI Express. Она включает в себя функции обнаружения, открытие/закрытие устройств и функции обмена данными. Библиотека API PCI Express предоставляет кроссплатформенный интерфейс (Windows, Linux) к драйверу устройств PCI Express. </span></p><p><span>Драйвер поддерживает доступ к ПЛИС в режиме записи/чтения регистров (отображенных в память хост-компьютера), а также DMA передачу данных между оперативной памятью хост-компьютера и внутренней логикой кристалла ПЛИС. Драйвер работает в тесной связке с контроллером шины PCI Express, включенным в Board Support Package проекта ПЛИС.</span></p><p>Проект ПЛИС состоит из двух частей, Board Support Package и пользовательского ядра. Board Support Package включает в себя <span style="line-height: 1.4285715;">интерфейсные IP ядра (PCI Express, DDR), аппаратные схемы для обмена данными между PCI Express, локальной DDR памятью и ядром пользователя. Board Support Package представлен в двух видах - с поддержкой локальной DDR памяти и без. При использовании DDR памяти, доступ к ней осуществляется через внутрикристалльную шину AXI. В обоих случаях присутствует ядро PCI Express с контроллером, поддерживающим следующие режимы передачи данных:</span></p><ul><li>Одиночные транзакции между CPU и ПЛИС. Чтение и запись центральным процессором регистров ПЛИС. </li><li>Блочные транзакции между ОЗУ хост-компьютера и ПЛИС. ПЛИС пишет и читает память хост-компьютера в режиме DMA. </li><li>Одиночные и блочные транзакции между ПЛИС. ПЛИС пишет данные в другую ПЛИС напрямую.</li><li>Блочная транзакция чтения ОЗУ хост-компьютера с передачей данных в ПЛИС с помощью внешнего к ПЛИС DMA контроллера. </li></ul><p>Пользовательское ядро разрабатывается под конкретную вычислительную задачу. В зависимости от конфигурации пользовательского ядра  может быть организован различный тракт передачи данных.  Например, может быть организован <span style="color: rgb(0,0,0);">прямой обмен данными между разными ПЛИС по шине PCI Express без использования промежуточных буферов в оперативной памяти или обмен данными между оперативной памятью хост-компьютера и внутренней AXI шиной</span>. С точки зрения пользователя  аппаратные интерфейсы, доступные ПЛИС,  представляются в виде очередей FIFO  и памяти на AXI шине.</p><p> </p><h1 id="id-НазначениеисоставSDKRC-47-Прикладныепрограммы">Прикладные программы</h1><p>Вместе с SDK RC-47  версии 1.0 поставляется ряд примеров прикладных программ, таких как</p><h3 id="id-НазначениеисоставSDKRC-47-rc47_pcie_test-тестшиныPCIExpressплаты">rc47_pcie_test - тест шины PCI Express платы</h3><p>Прикладная программа предназначена для тестирования интерфейса PCI Express ПЛИС Virtex7. Тестируются различные режимы передачи данных, описанные в параграфе <a href="17564092.html">&#1054;&#1073;&#1084;&#1077;&#1085; &#1076;&#1072;&#1085;&#1085;&#1099;&#1084;&#1080; &#1087;&#1086; &#1096;&#1080;&#1085;&#1077; PCIe</a>. </p><h3 id="id-НазначениеисоставSDKRC-47-rc47_pcie_speed_test-тестскоростишиныPCIExpress">rc47_pcie_speed_test - тест скорости шины PCI Express</h3><p>Прикладная программа предназначена для измерения скорости передачи данных по шине PCI Express в различных режимах, описанных в параграфе <a href="17564092.html">&#1054;&#1073;&#1084;&#1077;&#1085; &#1076;&#1072;&#1085;&#1085;&#1099;&#1084;&#1080; &#1087;&#1086; &#1096;&#1080;&#1085;&#1077; PCIe</a>. </p><h3 id="id-НазначениеисоставSDKRC-47-rc47_stress_test-стресстестплатыRC-47">rc47_stress_test - стресс тест платы RC-47</h3><p>Прикладная программа предназначена для тестирования системы питания и охлаждения платы RC-47 путем запуска на ПЛИС Virtex7 мощного вычислительного проекта, потребляющего большую мощность, и контроля его работоспособности в течение заданного пользователем времени. Проект ПЛИС Virtex7 предназначен для моделирования работы ПЛИС с различными параметрами использования внутренних ресурсов (заполненности) ПЛИС и тактовой частоты и может использоваться для определения предельных характеристик изделий семейства Virtex.</p><h3 id="id-НазначениеисоставSDKRC-47-rc47_axi_ddr-тестмодуляпамятиEM4-DDR3">rc47_axi_ddr -тест модуля памяти EM4-DDR3</h3><p>Прикладная программа предназначена для тестирования передачи данных между памятью DDR3 модуль EM4-DDR3 и системной памятью компьютера. В ПЛИС проекте реализована внутренняя шина AXI, через которую идет передача данных между PCI Express ядром и DDR контроллерами памяти EM4 модуля. </p><p><br />Все программы даны в исходный кодах для обоих частей - хост-программы и проекта ПЛИС.</p><p> </p><h1 id="id-НазначениеисоставSDKRC-47-Утилиты">Утилиты</h1><p>В состав SDK RC-47 входят утилиты, решающие следующие задачи</p><h3 id="id-НазначениеисоставSDKRC-47-ОбнаружениеинумерациянайденныхплатRC-47">Обнаружение и нумерация найденных плат RC-47</h3><p>Операционная система хост-компьютера видит платы RC-47 просто как набор устройств на шине PCI Express. Функции библиотеки платы RC-47 находят эти устройства, относят к одной плате и считывают серийный номер платы из ее ВПО. Утилита выводит данную информацию на экран. Подробнее о нумерации плат RC-47 написано в параграфе <a href="17564089.html">A&#1076;&#1088;&#1077;&#1089;&#1072;&#1094;&#1080;&#1103; &#1055;&#1051;&#1048;&#1057; &#1080; &#1085;&#1091;&#1084;&#1077;&#1088;&#1072;&#1094;&#1080;&#1103; &#1087;&#1083;&#1072;&#1090; RC-47</a>.</p><h3 id="id-НазначениеисоставSDKRC-47-РеконфигурацияПЛИСVirtex-7">Реконфигурация ПЛИС Virtex-7</h3><p>Блок RB-8V7 может решать различные вычислительные задачи, определяемые конфигурацией его ПЛИС вычислителей. Функции библиотеки платы RC-47 и соответствующая утилита позволяют менять эту конфигурацию через PCI Express и без перезагрузки хост-компьютера. </p><h3 id="id-НазначениеисоставSDKRC-47-СбросплатыконфигурацииПЛИСVirtex-7">Сброс платы конфигурации ПЛИС Virtex-7</h3><p>Утилита подается команду ВПО платы RC-47 на сброй конфигурации ПЛИС Virtex-7</p><h3 id="id-НазначениеисоставSDKRC-47-Температурныймониторинг">Температурный мониторинг</h3><p>Утилита считывает из ВПО платы RC-47 и выводит на экран текущие значения температуры вычислителей ПЛИС.</p><h3 id="id-НазначениеисоставSDKRC-47-ПерепрограммированиеПЗУплатыRC-47">Перепрограммирование ПЗУ платы RC-47</h3><p>При включении питания блока RB-8V7 конфигурация ПЛИС загружается автоматически средствами ВПО платы RC-47 из модуля ПЗУ, выполненного в виде карты microSD и расположенного на плате RC-47. SDK RС-47 позволяет изменять данные стартовые конфигурации через PCI Express. </p><p> </p><p> </p><p><span class="scroll-pi"  style="display:none;" type="pagebreak"></span></p><p> </p><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/17564075/17564907">new_stack</a> (application/gliffy+json)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/17564075/17564908.png">new_stack.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/17564075/17564109">new_stack</a> (application/gliffy+json)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/17564075/17564110.png">new_stack.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jul 20, 2015 13:39</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
